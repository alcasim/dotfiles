# ~/.profile: executed by the command interpreter for login shells.
# This file is not read by bash(1), if ~/.bash_profile or ~/.bash_login
# exists.
# see /usr/share/doc/bash/examples/startup-files for examples.
# the files are located in the bash-doc package.

# the default umask is set in /etc/profile; for setting the umask
# for ssh logins, install and configure the libpam-umask package.
#umask 022

# CDPATH
CDPATH=".:~:~/workingCopies:~/workingCopies/src:$(ls -1d ~/workingCopies/src/*/ | tr '\n' ':')"

if [ -d "/usr/local/sbin" ] ; then
  PATH="/usr/local/sbin:$PATH"
fi

# Use GNU utils instead of the default ones on MacOS
if [ -d '/usr/local/opt/findutils/libexec/gnubin' ]; then
  PATH="/usr/local/opt/findutils/libexec/gnubin:$PATH"
fi
if [ -d '/usr/local/opt/coreutils/libexec/gnubin' ]; then
  PATH="/usr/local/opt/coreutils/libexec/gnubin:$PATH"
fi
if [ -d '/usr/local/opt/make/libexec/gnubin' ];then
  PATH="/usr/local/opt/make/libexec/gnubin:$PATH"
fi
if [ -d "/usr/local/opt/gnu-tar/libexec/gnubin" ]; then
  PATH="/usr/local/opt/gnu-tar/libexec/gnubin:$PATH"
fi
if [ -d "/usr/local/opt/gnu-getopt/bin" ]; then
  PATH="/usr/local/opt/gnu-getopt/bin:$PATH"
fi
if [ -d "/usr/local/opt/gnu-sed/libexec/gnubin" ]; then
  PATH="/usr/local/opt/gnu-sed/libexec/gnubin:$PATH"
fi

# Use brew python
if [ -d '/usr/local/opt/python/libexec/bin' ]; then
  PATH="/usr/local/opt/python/libexec/bin:$PATH"
fi

# Use brew ruby
if [ -d '/usr/local/opt/ruby/bin' ]; then
  PATH="/usr/local/opt/ruby/bin:$PATH"
  # LDFLAGS="-L/usr/local/opt/ruby/lib"
  # CPPFLAGS="-I/usr/local/opt/ruby/include"
  # PKG_CONFIG_PATH="/usr/local/opt/ruby/lib/pkgconfig"
fi

if [ -x "$(command -v ruby)" ] && [ -x "$(command -v gem)" ]; then
    PATH="$(ruby -r rubygems -e 'puts Gem.bindir'):$PATH"
    PATH="$(ruby -r rubygems -e 'puts Gem.user_dir')/bin:$PATH"
fi

# Linuxbrew paths
if [ -d "$HOME/.linuxbrew/bin:$PATH" ]; then
  PATH="$HOME/.linuxbrew/bin:$PATH"
fi
if [ -d "$HOME/.linuxbrew/share/man:$MANPATH" ]; then
  MANPATH="$HOME/.linuxbrew/share/man:$MANPATH"
fi
if [ -d "$HOME/.linuxbrew/share/info:$INFOPATH" ]; then
  INFOPATH="$HOME/.linuxbrew/share/info:$INFOPATH"
fi

# GOPATH
GOPATH="${HOME}/go:${HOME}/workingCopies"
GOBIN="${GOPATH/:*}/bin"
PATH="$PATH:${GOBIN}"

# set PATH so it includes user's private bin if it exists
if [ -d "$HOME/.local/bin" ] ; then
  PATH="$HOME/.local/bin:$PATH"
fi
if [ -d "$HOME/bin" ] ; then
  PATH="$HOME/bin:$PATH"
fi

# if running bash
if [ -n "$BASH_VERSION" ]; then
  # include .bashrc if it exists
  if [ -f "$HOME/.bashrc" ] && [[ "$CONFIGURED" != "true" ]]; then
    . "$HOME/.bashrc"
  fi
fi
